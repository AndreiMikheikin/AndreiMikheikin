function handleDragStart(e){e.currentTarget.classList.add("dragging"),e.dataTransfer.setData("text/plain",e.currentTarget.id)}function handleDragEnd(e){e.currentTarget.classList.remove("dragging")}function handleDragOver(e){e.preventDefault()}function handleDrop(e){e.preventDefault();const t=e.dataTransfer.getData("text/plain"),n=document.getElementById(t),d=document.getElementById("admin-dashboard-content"),o=e.clientX-d.getBoundingClientRect().left,a=e.clientY-d.getBoundingClientRect().top,c=Math.max(0,Math.min(o-n.offsetWidth/2,d.offsetWidth-n.offsetWidth)),r=Math.max(0,Math.min(a-n.offsetHeight/2,d.offsetHeight-n.offsetHeight));n.style.left=`${c}px`,n.style.top=`${r}px`,saveIconPositions()}function handleTouchEnd(e){const t=e.currentTarget.id;setTimeout(()=>{switch(t){case ICON1_ID:showDishForm();break;case ICON2_ID:showMenu();break;case ICON3_ID:showPurchaseCalculationForm();break;case ICON4_ID:showOrderForm();break;case ICON5_ID:showSuppliers()}},200)}function hideWelcomeModal(){const e=document.getElementById("welcome-modal");e.style.display="none",e.removeEventListener("touchstart",handleTouchStart),e.removeEventListener("touchend",handleTouchEndGesture);document.getElementById("close-button").removeEventListener("click",hideWelcomeModal),showAdminDashboard()}function showAdminDashboard(){document.getElementById("admin-dashboard-container").style.display="block",loadAdminDashboard()}function handleTouchStart(e){const t=e.touches[0];startX=t.clientX,startY=t.clientY}function handleTouchEndGesture(e){const t=e.changedTouches[0].clientY-startY;Math.abs(t)>50&&t<0&&handleSwipeUp(e)}function handleSwipeUp(e){e.stopPropagation(),console.log("Swipe up detected - closing modal"),hideWelcomeModal()}import{loadAdminDashboard,showSuppliers}from"./admin.js";const ICON1_ID="icon1",ICON2_ID="icon2",ICON3_ID="icon3",ICON4_ID="icon4",ICON5_ID="icon5";export function saveIconPositions(){const e=document.querySelectorAll(".icon-container"),t=Array.from(e).map(e=>({id:e.id,left:e.style.left,top:e.style.top}));localStorage.setItem("iconPositions",JSON.stringify(t))};export function initializeDragAndDrop(){document.querySelectorAll(".icon-container").forEach(e=>{e.addEventListener("dragstart",handleDragStart),e.addEventListener("dragend",handleDragEnd)}),document.getElementById("admin-dashboard-content").addEventListener("dragover",handleDragOver),document.getElementById("admin-dashboard-content").addEventListener("drop",handleDrop)};export function addIconEventListeners(){document.getElementById(ICON1_ID).addEventListener("dblclick",showDishForm),document.getElementById(ICON2_ID).addEventListener("dblclick",showMenu),document.getElementById(ICON3_ID).addEventListener("dblclick",showPurchaseCalculationForm),document.getElementById(ICON4_ID).addEventListener("dblclick",showOrderForm),document.getElementById(ICON5_ID).addEventListener("dblclick",showSuppliers),document.getElementById(ICON1_ID).addEventListener("touchend",handleTouchEnd),document.getElementById(ICON2_ID).addEventListener("touchend",handleTouchEnd),document.getElementById(ICON3_ID).addEventListener("touchend",handleTouchEnd),document.getElementById(ICON4_ID).addEventListener("touchend",handleTouchEnd),document.getElementById(ICON5_ID).addEventListener("touchend",handleTouchEnd)};let startY=0,startX=0;export function showWelcomeModal(e){const t=document.getElementById("welcome-modal"),n=e.split("@")[0];document.getElementById("welcome-message").textContent=`Добро пожаловать, ${n}!`,t.style.display="block",t.addEventListener("touchstart",handleTouchStart),t.addEventListener("touchend",handleTouchEndGesture);document.getElementById("close-button").addEventListener("click",hideWelcomeModal)};